{
  "arguments": "rules.json configs",
  "expected_stdout": "{\"event\":\"file_relocated\",\"from\":\"services/app.yaml\",\"to\":\"services/us-west-2/api.yaml\"}\\n{\"event\":\"file_relocated\",\"from\":\"services/worker.yaml\",\"to\":\"services/eu-west-1/worker.yaml\"}\\n",
  "rules": {
    "organize_by_region": {
      "type": "content_rename",
      "scope": "file",
      "file_pattern": "services/*.yaml",
      "variables": {
        "region": "aws.region",
        "name": "service.name"
      },
      "new_path": "${region}/${name}.yaml"
    }
  },
  "expected_files": {
    "configs/services/eu-west-1/worker.yaml": "service:\\n  name: worker\\naws:\\n  region: eu-west-1\\nenvironment: production\\n",
    "configs/services/us-west-2/api.yaml": "service:\\n  name: api\\naws:\\n  region: us-west-2\\nenvironment: staging\\n"
  }
}
