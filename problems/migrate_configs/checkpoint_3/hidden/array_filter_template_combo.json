{
  "arguments": "rules.json configs",
  "expected_stdout": "{\"event\":\"file_updated\",\"file\":\"arrays/user_profiles.yaml\",\"rules_applied\":[\"a_promote_active\",\"b_build_summary\"]}\\n",
  "rules": {
    "a_promote_active": {
      "type": "pattern_replace",
      "key_pattern": "users[?status=active].role",
      "value": "premium"
    },
    "b_build_summary": {
      "type": "template_string",
      "key": "summary",
      "variables": {
        "first": "users[0].name",
        "second": "users[1].name"
      },
      "template": "${first}-${second}"
    }
  },
  "expected_files": {
    "configs/arrays/user_profiles.yaml": "summary: \\\"dana-emma\\\"\\nusers:\\n  - name: dana\\n    status: active\\n    role: premium\\n  - name: emma\\n    status: inactive\\n    role: basic\\n"
  }
}
