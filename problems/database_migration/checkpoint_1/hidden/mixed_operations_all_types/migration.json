{
  "version": 2,
  "operations": [
    {
      "type": "create_table",
      "table": "categories",
      "columns": [
        {
          "name": "id",
          "type": "INTEGER",
          "primary_key": true
        },
        {
          "name": "name",
          "type": "TEXT",
          "not_null": true
        }
      ]
    },
    {
      "type": "add_column",
      "table": "products",
      "column": {
        "name": "category_id",
        "type": "INTEGER"
      }
    },
    {
      "type": "add_column",
      "table": "products",
      "column": {
        "name": "stock",
        "type": "INTEGER",
        "default": "0"
      }
    },
    {
      "type": "drop_column",
      "table": "products",
      "column": "price"
    },
    {
      "type": "add_column",
      "table": "products",
      "column": {
        "name": "price_cents",
        "type": "INTEGER",
        "not_null": true,
        "default": "0"
      }
    }
  ],
  "description": "Migrate products table and create categories"
}