arguments: migrate migration.json app.db
input_files:
- path: app.db
  file_type: sqlite
- content: "{\n  \"version\": 2,\n  \"description\": \"Create posts table with foreign\
    \ key\",\n  \"operations\": [\n    {\n      \"type\": \"create_table\",\n    \
    \  \"table\": \"posts\",\n      \"columns\": [\n        {\"name\": \"id\", \"\
    type\": \"INTEGER\", \"primary_key\": true, \"auto_increment\": true},\n     \
    \   {\"name\": \"user_id\", \"type\": \"INTEGER\", \"not_null\": true},\n    \
    \    {\"name\": \"title\", \"type\": \"TEXT\", \"not_null\": true}\n      ]\n\
    \    },\n    {\n      \"type\": \"add_foreign_key\",\n      \"table\": \"posts\"\
    ,\n      \"name\": \"fk_posts_user_id\",\n      \"columns\": [\"user_id\"],\n\
    \      \"references\": {\n        \"table\": \"users\",\n        \"columns\":\
    \ [\"id\"]\n      },\n      \"on_delete\": \"RESTRICT\"\n    }\n  ]\n}\n"
  file_type: json
  path: migration.json
tracked_files:
- app.db
expected_status: 0
