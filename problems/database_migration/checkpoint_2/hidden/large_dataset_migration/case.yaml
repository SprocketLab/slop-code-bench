arguments: migrate migration.json app.db
input_files:
- path: app.db
  file_type: sqlite
- content: "{\n  \"version\": 2,\n  \"description\": \"Transform large dataset\",\n\
    \  \"operations\": [\n    {\n      \"type\": \"add_column\",\n      \"table\"\
    : \"events\",\n      \"column\": {\n        \"name\": \"category\",\n        \"\
    type\": \"TEXT\"\n      }\n    },\n    {\n      \"type\": \"transform_data\",\n\
    \      \"table\": \"events\",\n      \"transformations\": [\n        {\n     \
    \     \"column\": \"category\",\n          \"expression\": \"CASE WHEN value <\
    \ 100 THEN 'low' WHEN value < 500 THEN 'medium' ELSE 'high' END\"\n        }\n\
    \      ]\n    }\n  ]\n}"
  file_type: json
  path: migration.json
tracked_files:
- app.db
expected_status: 0
