arguments: migrate migration.json app.db
input_files:
- path: app.db
  file_type: sqlite
- content: "{\n  \"version\": 2,\n  \"description\": \"Create display name and price\
    \ tier\",\n  \"operations\": [\n    {\n      \"type\": \"add_column\",\n     \
    \ \"table\": \"products\",\n      \"column\": {\n        \"name\": \"display_name\"\
    ,\n        \"type\": \"TEXT\"\n      }\n    },\n    {\n      \"type\": \"transform_data\"\
    ,\n      \"table\": \"products\",\n      \"transformations\": [\n        {\n \
    \         \"column\": \"display_name\",\n          \"expression\": \"UPPER(SUBSTR(name,\
    \ 1, 1)) || SUBSTR(name, 2) || ' - $' || CAST(ROUND(price, 2) AS TEXT)\"\n   \
    \     }\n      ]\n    }\n  ]\n}"
  file_type: json
  path: migration.json
tracked_files:
- app.db
expected_status: 0
