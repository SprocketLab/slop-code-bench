arguments: migrate migration.json app.db
input_files:
- path: app.db
  file_type: sqlite
- content: "{\n  \"version\": 2,\n  \"description\": \"Add full_name and grade, then\
    \ transform both\",\n  \"operations\": [\n    {\n      \"type\": \"add_column\"\
    ,\n      \"table\": \"users\",\n      \"column\": {\n        \"name\": \"full_name\"\
    ,\n        \"type\": \"TEXT\"\n      }\n    },\n    {\n      \"type\": \"add_column\"\
    ,\n      \"table\": \"users\",\n      \"column\": {\n        \"name\": \"grade\"\
    ,\n        \"type\": \"TEXT\"\n      }\n    },\n    {\n      \"type\": \"transform_data\"\
    ,\n      \"table\": \"users\",\n      \"transformations\": [\n        {\n    \
    \      \"column\": \"full_name\",\n          \"expression\": \"first_name || '\
    \ ' || last_name\"\n        }\n      ]\n    },\n    {\n      \"type\": \"transform_data\"\
    ,\n      \"table\": \"users\",\n      \"transformations\": [\n        {\n    \
    \      \"column\": \"grade\",\n          \"expression\": \"CASE WHEN score >=\
    \ 90 THEN 'A' WHEN score >= 80 THEN 'B' ELSE 'C' END\"\n        }\n      ]\n \
    \   }\n  ]\n}"
  file_type: json
  path: migration.json
tracked_files:
- app.db
expected_status: 0
