arguments: migrate migration.json app.db
input_files:
- path: app.db
  file_type: sqlite
- content: "{\n  \"version\": 2,\n  \"description\": \"Mixed checkpoint 1 and 2 operations\"\
    ,\n  \"operations\": [\n    {\n      \"type\": \"add_column\",\n      \"table\"\
    : \"users\",\n      \"column\": {\n        \"name\": \"name\",\n        \"type\"\
    : \"TEXT\"\n      }\n    },\n    {\n      \"type\": \"migrate_column_data\",\n\
    \      \"table\": \"users\",\n      \"from_column\": \"old_name\",\n      \"to_column\"\
    : \"name\"\n    },\n    {\n      \"type\": \"drop_column\",\n      \"table\":\
    \ \"users\",\n      \"column\": \"old_name\"\n    },\n    {\n      \"type\": \"\
    add_column\",\n      \"table\": \"users\",\n      \"column\": {\n        \"name\"\
    : \"age_group\",\n        \"type\": \"TEXT\"\n      }\n    },\n    {\n      \"\
    type\": \"transform_data\",\n      \"table\": \"users\",\n      \"transformations\"\
    : [\n        {\n          \"column\": \"age_group\",\n          \"expression\"\
    : \"CASE WHEN age < 30 THEN 'young' ELSE 'adult' END\"\n        }\n      ]\n \
    \   }\n  ]\n}"
  file_type: json
  path: migration.json
tracked_files:
- app.db
expected_status: 0
