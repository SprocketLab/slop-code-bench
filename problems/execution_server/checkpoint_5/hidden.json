{
  "env_cache_miss": {
    "input": {
      "body": {
        "command": "printenv GREETING",
        "env": {
          "GREETING": "hello"
        },
        "files": {},
        "stdin": "",
        "timeout": 5
      },
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "method": "POST",
      "path": "/v1/execute"
    },
    "expected": {
      "output": {
        "cached": false,
        "duration": 10,
        "exit_code": 0,
        "files": {},
        "id": "UUID",
        "stderr": "",
        "stdout": "hello\n",
        "timed_out": false
      },
      "status_code": 201
    },
    "order": 0
  },
  "env_cache_hit": {
    "input": {
      "body": {
        "command": "printenv GREETING",
        "env": {
          "GREETING": "hello"
        },
        "files": {},
        "stdin": "",
        "timeout": 5
      },
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "method": "POST",
      "path": "/v1/execute"
    },
    "expected": {
      "output": {
        "cached": true,
        "duration": 0.1,
        "exit_code": 0,
        "files": {},
        "id": "UUID",
        "stderr": "",
        "stdout": "hello\n",
        "timed_out": false
      },
      "status_code": 201
    },
    "order": 1
  },
  "env_changes_cache": {
    "input": {
      "body": {
        "command": "printenv GREETING",
        "env": {
          "GREETING": "hola"
        },
        "files": {},
        "stdin": "",
        "timeout": 5
      },
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "method": "POST",
      "path": "/v1/execute"
    },
    "expected": {
      "output": {
        "cached": false,
        "duration": 10,
        "exit_code": 0,
        "files": {},
        "id": "UUID",
        "stderr": "",
        "stdout": "hola\n",
        "timed_out": false
      },
      "status_code": 201
    },
    "order": 2
  },
  "stdin_cache_miss": {
    "input": {
      "body": {
        "command": "cat",
        "env": {},
        "files": {},
        "stdin": "input-one\\n",
        "timeout": 5
      },
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "method": "POST",
      "path": "/v1/execute"
    },
    "expected": {
      "output": {
        "cached": false,
        "duration": 10,
        "exit_code": 0,
        "files": {},
        "id": "UUID",
        "stderr": "",
        "stdout": "input-one\\n",
        "timed_out": false
      },
      "status_code": 201
    },
    "order": 3
  },
  "stdin_cache_hit": {
    "input": {
      "body": {
        "command": "cat",
        "env": {},
        "files": {},
        "stdin": "input-one\\n",
        "timeout": 5
      },
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "method": "POST",
      "path": "/v1/execute"
    },
    "expected": {
      "output": {
        "cached": true,
        "duration": 0.1,
        "exit_code": 0,
        "files": {},
        "id": "UUID",
        "stderr": "",
        "stdout": "input-one\\n",
        "timed_out": false
      },
      "status_code": 201
    },
    "order": 4
  },
  "timeout_variation_short": {
    "input": {
      "body": {
        "command": "echo 'timeout variant'",
        "env": {},
        "files": {},
        "stdin": "",
        "timeout": 1
      },
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "method": "POST",
      "path": "/v1/execute"
    },
    "expected": {
      "output": {
        "cached": false,
        "duration": 10,
        "exit_code": 0,
        "files": {},
        "id": "UUID",
        "stderr": "",
        "stdout": "timeout variant\n",
        "timed_out": false
      },
      "status_code": 201
    },
    "order": 5
  },
  "timeout_variation_long": {
    "input": {
      "body": {
        "command": "echo 'timeout variant'",
        "env": {},
        "files": {},
        "stdin": "",
        "timeout": 2
      },
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "method": "POST",
      "path": "/v1/execute"
    },
    "expected": {
      "output": {
        "cached": false,
        "duration": 10,
        "exit_code": 0,
        "files": {},
        "id": "UUID",
        "stderr": "",
        "stdout": "timeout variant\n",
        "timed_out": false
      },
      "status_code": 201
    },
    "order": 6
  },
  "tracking_chain_cache_miss": {
    "input": {
      "body": {
        "command": [
          {
            "cmd": "echo 'tracking line 1' > tracked.txt"
          },
          {
            "cmd": "echo 'tracking line 2' >> tracked.txt"
          }
        ],
        "track": [
          "*.txt"
        ]
      },
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "method": "POST",
      "path": "/v1/execute"
    },
    "expected": {
      "output": {
        "cached": false,
        "commands": [
          {
            "cmd": "echo 'tracking line 1' > tracked.txt",
            "duration": 5,
            "exit_code": 0,
            "stderr": "",
            "stdout": "",
            "timed_out": false
          },
          {
            "cmd": "echo 'tracking line 2' >> tracked.txt",
            "duration": 5,
            "exit_code": 0,
            "stderr": "",
            "stdout": "",
            "timed_out": false
          }
        ],
        "duration": 10,
        "exit_code": 0,
        "files": {
          "tracked.txt": "tracking line 1\ntracking line 2\n"
        },
        "id": "UUID",
        "timed_out": false
      },
      "status_code": 201
    },
    "order": 7
  },
  "tracking_chain_cache_hit": {
    "input": {
      "body": {
        "command": [
          {
            "cmd": "echo 'tracking line 1' > tracked.txt"
          },
          {
            "cmd": "echo 'tracking line 2' >> tracked.txt"
          }
        ],
        "track": [
          "*.txt"
        ]
      },
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "method": "POST",
      "path": "/v1/execute"
    },
    "expected": {
      "output": {
        "cached": true,
        "commands": [
          {
            "cmd": "echo 'tracking line 1' > tracked.txt",
            "duration": 5,
            "exit_code": 0,
            "stderr": "",
            "stdout": "",
            "timed_out": false
          },
          {
            "cmd": "echo 'tracking line 2' >> tracked.txt",
            "duration": 5,
            "exit_code": 0,
            "stderr": "",
            "stdout": "",
            "timed_out": false
          }
        ],
        "duration": 1,
        "exit_code": 0,
        "files": {
          "tracked.txt": "tracking line 1\ntracking line 2\n"
        },
        "id": "UUID",
        "timed_out": false
      },
      "status_code": 201
    },
    "order": 8
  },
  "track_pattern_change_miss": {
    "input": {
      "body": {
        "command": [
          {
            "cmd": "echo 'tracking line 1' > tracked.txt"
          },
          {
            "cmd": "echo 'tracking line 2' >> tracked.txt"
          }
        ],
        "track": [
          "tracked.txt"
        ]
      },
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "method": "POST",
      "path": "/v1/execute"
    },
    "expected": {
      "output": {
        "cached": false,
        "commands": [
          {
            "cmd": "echo 'tracking line 1' > tracked.txt",
            "duration": 5,
            "exit_code": 0,
            "stderr": "",
            "stdout": "",
            "timed_out": false
          },
          {
            "cmd": "echo 'tracking line 2' >> tracked.txt",
            "duration": 5,
            "exit_code": 0,
            "stderr": "",
            "stdout": "",
            "timed_out": false
          }
        ],
        "duration": 10,
        "exit_code": 0,
        "files": {
          "tracked.txt": "tracking line 1\ntracking line 2\n"
        },
        "id": "UUID",
        "timed_out": false
      },
      "status_code": 201
    },
    "order": 9
  },
  "continue_on_error_true_miss": {
    "input": {
      "body": {
        "command": [
          {
            "cmd": "echo 'chain step 1'"
          },
          {
            "cmd": "echo 'chain step 2'"
          }
        ],
        "continue_on_error": true
      },
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "method": "POST",
      "path": "/v1/execute"
    },
    "expected": {
      "output": {
        "cached": false,
        "commands": [
          {
            "cmd": "echo 'chain step 1'",
            "duration": 5,
            "exit_code": 0,
            "stderr": "",
            "stdout": "chain step 1\n",
            "timed_out": false
          },
          {
            "cmd": "echo 'chain step 2'",
            "duration": 5,
            "exit_code": 0,
            "stderr": "",
            "stdout": "chain step 2\n",
            "timed_out": false
          }
        ],
        "duration": 10,
        "exit_code": 0,
        "files": {},
        "id": "UUID",
        "timed_out": false
      },
      "status_code": 201
    },
    "order": 10
  },
  "continue_on_error_true_hit": {
    "input": {
      "body": {
        "command": [
          {
            "cmd": "echo 'chain step 1'"
          },
          {
            "cmd": "echo 'chain step 2'"
          }
        ],
        "continue_on_error": true
      },
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "method": "POST",
      "path": "/v1/execute"
    },
    "expected": {
      "output": {
        "cached": true,
        "commands": [
          {
            "cmd": "echo 'chain step 1'",
            "duration": 5,
            "exit_code": 0,
            "stderr": "",
            "stdout": "chain step 1\n",
            "timed_out": false
          },
          {
            "cmd": "echo 'chain step 2'",
            "duration": 5,
            "exit_code": 0,
            "stderr": "",
            "stdout": "chain step 2\n",
            "timed_out": false
          }
        ],
        "duration": 1,
        "exit_code": 0,
        "files": {},
        "id": "UUID",
        "timed_out": false
      },
      "status_code": 201
    },
    "order": 11
  },
  "continue_on_error_false_miss": {
    "input": {
      "body": {
        "command": [
          {
            "cmd": "echo 'chain step 1'"
          },
          {
            "cmd": "echo 'chain step 2'"
          }
        ]
      },
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "method": "POST",
      "path": "/v1/execute"
    },
    "expected": {
      "output": {
        "cached": false,
        "commands": [
          {
            "cmd": "echo 'chain step 1'",
            "duration": 5,
            "exit_code": 0,
            "stderr": "",
            "stdout": "chain step 1\n",
            "timed_out": false
          },
          {
            "cmd": "echo 'chain step 2'",
            "duration": 5,
            "exit_code": 0,
            "stderr": "",
            "stdout": "chain step 2\n",
            "timed_out": false
          }
        ],
        "duration": 10,
        "exit_code": 0,
        "files": {},
        "id": "UUID",
        "timed_out": false
      },
      "status_code": 201
    },
    "order": 12
  },
  "continue_on_error_false_hit": {
    "input": {
      "body": {
        "command": [
          {
            "cmd": "echo 'chain step 1'"
          },
          {
            "cmd": "echo 'chain step 2'"
          }
        ]
      },
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "method": "POST",
      "path": "/v1/execute"
    },
    "expected": {
      "output": {
        "cached": true,
        "commands": [
          {
            "cmd": "echo 'chain step 1'",
            "duration": 5,
            "exit_code": 0,
            "stderr": "",
            "stdout": "chain step 1\n",
            "timed_out": false
          },
          {
            "cmd": "echo 'chain step 2'",
            "duration": 5,
            "exit_code": 0,
            "stderr": "",
            "stdout": "chain step 2\n",
            "timed_out": false
          }
        ],
        "duration": 1,
        "exit_code": 0,
        "files": {},
        "id": "UUID",
        "timed_out": false
      },
      "status_code": 201
    },
    "order": 13
  },
  "force_seed_miss": {
    "input": {
      "body": {
        "command": "echo 'force cache'",
        "env": {},
        "files": {},
        "stdin": "",
        "timeout": 5
      },
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "method": "POST",
      "path": "/v1/execute"
    },
    "expected": {
      "output": {
        "cached": false,
        "duration": 10,
        "exit_code": 0,
        "files": {},
        "id": "UUID",
        "stderr": "",
        "stdout": "force cache\n",
        "timed_out": false
      },
      "status_code": 201
    },
    "order": 14
  },
  "force_seed_hit": {
    "input": {
      "body": {
        "command": "echo 'force cache'",
        "env": {},
        "files": {},
        "stdin": "",
        "timeout": 5
      },
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "method": "POST",
      "path": "/v1/execute"
    },
    "expected": {
      "output": {
        "cached": true,
        "duration": 0.1,
        "exit_code": 0,
        "files": {},
        "id": "UUID",
        "stderr": "",
        "stdout": "force cache\n",
        "timed_out": false
      },
      "status_code": 201
    },
    "order": 15
  },
  "force_bypass_miss": {
    "input": {
      "body": {
        "command": "echo 'force cache'",
        "env": {},
        "files": {},
        "force": true,
        "stdin": "",
        "timeout": 5
      },
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "method": "POST",
      "path": "/v1/execute"
    },
    "expected": {
      "output": {
        "cached": false,
        "duration": 10,
        "exit_code": 0,
        "files": {},
        "id": "UUID",
        "stderr": "",
        "stdout": "force cache\n",
        "timed_out": false
      },
      "status_code": 201
    },
    "order": 16
  },
  "force_followup_hit": {
    "input": {
      "body": {
        "command": "echo 'force cache'",
        "env": {},
        "files": {},
        "stdin": "",
        "timeout": 5
      },
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "method": "POST",
      "path": "/v1/execute"
    },
    "expected": {
      "output": {
        "cached": true,
        "duration": 0.1,
        "exit_code": 0,
        "files": {},
        "id": "UUID",
        "stderr": "",
        "stdout": "force cache\n",
        "timed_out": false
      },
      "status_code": 201
    },
    "order": 17
  },
  "stats_cache_metrics": {
    "input": {
      "method": "GET",
      "path": "/v1/stats/execution"
    },
    "expected": {
      "output": {
        "cache": {
          "hit_rate": "{{ cache.hit_rate }}",
          "hits": "{{ cache.hits }}",
          "misses": "{{ cache.misses }}"
        },
        "duration": {
          "average": "{{ duration.average }}",
          "max": "{{ duration.max }}",
          "median": "{{ duration.median }}",
          "min": "{{ duration.min }}",
          "stddev": "{{ duration.stddev }}"
        },
        "ran": "{{ ran }}"
      },
      "status_code": 200
    },
    "order": 18
  }
}