{
  "regression_basic_echo_with_env": {
    "expected": {
      "output": {
        "duration": 10,
        "exit_code": 0,
        "files": {},
        "id": "UUID",
        "stderr": "",
        "stdout": "regression_value\n",
        "timed_out": false
      },
      "status_code": 201
    },
    "input": {
      "body": {
        "command": "echo $REGRESSION_VAR",
        "env": {
          "REGRESSION_VAR": "regression_value"
        },
        "files": {},
        "stdin": [],
        "timeout": 10
      },
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "method": "POST",
      "path": "/v1/execute"
    },
    "order": 100
  },
  "regression_file_tracking_glob": {
    "expected": {
      "output": {
        "duration": 10,
        "exit_code": 0,
        "files": {
          "output.txt": "tracked output\n"
        },
        "id": "UUID",
        "stderr": "",
        "stdout": "",
        "timed_out": false
      },
      "status_code": 201
    },
    "input": {
      "body": {
        "command": "echo 'tracked output' > output.txt",
        "env": {},
        "files": {},
        "stdin": [],
        "timeout": 10,
        "track": [
          "*.txt"
        ]
      },
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "method": "POST",
      "path": "/v1/execute"
    },
    "order": 101
  },
  "regression_structured_json_file": {
    "expected": {
      "output": {
        "duration": 10,
        "exit_code": 0,
        "files": {},
        "id": "UUID",
        "stderr": "",
        "stdout": "{\"key\":\"value\",\"nested\":{\"arr\":[1, 2, 3]}}\n",
        "timed_out": false
      },
      "status_code": 201
    },
    "input": {
      "body": {
        "command": "cat config.json",
        "env": {},
        "files": {
          "config.json": {
            "key": "value",
            "nested": {
              "arr": [
                1,
                2,
                3
              ]
            }
          }
        },
        "stdin": [],
        "timeout": 10
      },
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "method": "POST",
      "path": "/v1/execute"
    },
    "order": 102
  },
  "regression_stdin_to_first_only": {
    "order": 103,
    "input": {
      "method": "POST",
      "path": "/v1/execute",
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "body": {
        "command": [
          {
            "cmd": "cat"
          },
          {
            "cmd": "echo second"
          }
        ],
        "stdin": [
          "from stdin"
        ],
        "timeout": 10
      }
    },
    "expected": {
      "status_code": 201,
      "output": {
        "id": "UUID",
        "commands": [
          {
            "cmd": "cat",
            "stdout": "from stdin\n",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false
          },
          {
            "cmd": "echo second",
            "stdout": "second\n",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false
          }
        ],
        "exit_code": 0,
        "duration": 10,
        "timed_out": false,
        "files": {}
      }
    }
  },
  "regression_stdin_shell_expansion_attempt": {
    "order": 104,
    "input": {
      "method": "POST",
      "path": "/v1/execute",
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "body": {
        "command": [
          {
            "cmd": "cat"
          }
        ],
        "stdin": [
          "$PATH",
          "${HOME}",
          "$NONEXISTENT"
        ],
        "timeout": 10
      }
    },
    "expected": {
      "status_code": 201,
      "output": {
        "id": "UUID",
        "commands": [
          {
            "cmd": "cat",
            "stdout": "$PATH\n${HOME}\n$NONEXISTENT\n",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false
          }
        ],
        "exit_code": 0,
        "duration": 10,
        "timed_out": false,
        "files": {}
      }
    }
  },
  "regression_stdin_command_substitution": {
    "order": 105,
    "input": {
      "method": "POST",
      "path": "/v1/execute",
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "body": {
        "command": [
          {
            "cmd": "cat"
          }
        ],
        "stdin": [
          "$(whoami)",
          "$(id)",
          "`date`"
        ],
        "timeout": 10
      }
    },
    "expected": {
      "status_code": 201,
      "output": {
        "id": "UUID",
        "commands": [
          {
            "cmd": "cat",
            "stdout": "$(whoami)\n$(id)\n`date`\n",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false
          }
        ],
        "exit_code": 0,
        "duration": 10,
        "timed_out": false,
        "files": {}
      }
    }
  },
  "regression_stdin_shell_operators": {
    "order": 106,
    "input": {
      "method": "POST",
      "path": "/v1/execute",
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "body": {
        "command": [
          {
            "cmd": "cat"
          }
        ],
        "stdin": [
          "a; rm -rf /",
          "a && echo pwned",
          "a | cat /etc/passwd",
          "a > /tmp/evil"
        ],
        "timeout": 10
      }
    },
    "expected": {
      "status_code": 201,
      "output": {
        "id": "UUID",
        "commands": [
          {
            "cmd": "cat",
            "stdout": "a; rm -rf /\na && echo pwned\na | cat /etc/passwd\na > /tmp/evil\n",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false
          }
        ],
        "exit_code": 0,
        "duration": 10,
        "timed_out": false,
        "files": {}
      }
    }
  },
  "regression_stdin_quotes_escapes": {
    "order": 107,
    "input": {
      "method": "POST",
      "path": "/v1/execute",
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "body": {
        "command": [
          {
            "cmd": "cat"
          }
        ],
        "stdin": [
          "he said \"hello\"",
          "it's fine",
          "back\\slash",
          "tab\there"
        ],
        "timeout": 10
      }
    },
    "expected": {
      "status_code": 201,
      "output": {
        "id": "UUID",
        "commands": [
          {
            "cmd": "cat",
            "stdout": "he said \"hello\"\nit's fine\nback\\slash\ntab\there\n",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false
          }
        ],
        "exit_code": 0,
        "duration": 10,
        "timed_out": false,
        "files": {}
      }
    }
  },
  "regression_stdin_unicode": {
    "order": 108,
    "input": {
      "method": "POST",
      "path": "/v1/execute",
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "body": {
        "command": [
          {
            "cmd": "cat"
          }
        ],
        "stdin": [
          "Hello",
          "ÐŸÑ€Ð¸Ð²ÐµÑ‚",
          "ä½ å¥½",
          "Ù…Ø±Ø­Ø¨Ø§",
          "ðŸ”¥ðŸ’€ðŸŽ‰"
        ],
        "timeout": 10
      }
    },
    "expected": {
      "status_code": 201,
      "output": {
        "id": "UUID",
        "commands": [
          {
            "cmd": "cat",
            "stdout": "Hello\nÐŸÑ€Ð¸Ð²ÐµÑ‚\nä½ å¥½\nÙ…Ø±Ø­Ø¨Ø§\nðŸ”¥ðŸ’€ðŸŽ‰\n",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false
          }
        ],
        "exit_code": 0,
        "duration": 10,
        "timed_out": false,
        "files": {}
      }
    }
  },
  "regression_stdin_empty_string": {
    "order": 109,
    "input": {
      "method": "POST",
      "path": "/v1/execute",
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "body": {
        "command": [
          {
            "cmd": "cat"
          }
        ],
        "stdin": "",
        "timeout": 10
      }
    },
    "expected": {
      "status_code": 201,
      "output": {
        "id": "UUID",
        "commands": [
          {
            "cmd": "cat",
            "stdout": "",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false
          }
        ],
        "exit_code": 0,
        "duration": 10,
        "timed_out": false,
        "files": {}
      }
    }
  },
  "regression_stdin_empty_array": {
    "order": 110,
    "input": {
      "method": "POST",
      "path": "/v1/execute",
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "body": {
        "command": [
          {
            "cmd": "cat"
          }
        ],
        "stdin": [],
        "timeout": 10
      }
    },
    "expected": {
      "status_code": 201,
      "output": {
        "id": "UUID",
        "commands": [
          {
            "cmd": "cat",
            "stdout": "",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false
          }
        ],
        "exit_code": 0,
        "duration": 10,
        "timed_out": false,
        "files": {}
      }
    }
  },
  "regression_stdin_whitespace_only": {
    "order": 111,
    "input": {
      "method": "POST",
      "path": "/v1/execute",
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "body": {
        "command": [
          {
            "cmd": "cat"
          }
        ],
        "stdin": [
          "   ",
          "\t\t",
          "  \t  "
        ],
        "timeout": 10
      }
    },
    "expected": {
      "status_code": 201,
      "output": {
        "id": "UUID",
        "commands": [
          {
            "cmd": "cat",
            "stdout": "   \n\t\t\n  \t  \n",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false
          }
        ],
        "exit_code": 0,
        "duration": 10,
        "timed_out": false,
        "files": {}
      }
    }
  },
  "regression_stdin_very_long": {
    "order": 112,
    "input": {
      "method": "POST",
      "path": "/v1/execute",
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "body": {
        "command": [
          {
            "cmd": "wc -c"
          }
        ],
        "stdin": [
          "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
        ],
        "timeout": 10
      }
    },
    "expected": {
      "status_code": 201,
      "output": {
        "id": "UUID",
        "commands": [
          {
            "cmd": "wc -c",
            "stdout": "5063\n",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false
          }
        ],
        "exit_code": 0,
        "duration": 10,
        "timed_out": false,
        "files": {}
      }
    }
  },
  "regression_chain_single_element": {
    "order": 113,
    "input": {
      "method": "POST",
      "path": "/v1/execute",
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "body": {
        "command": [
          {
            "cmd": "echo solo"
          }
        ],
        "timeout": 10
      }
    },
    "expected": {
      "status_code": 201,
      "output": {
        "id": "UUID",
        "commands": [
          {
            "cmd": "echo solo",
            "stdout": "solo\n",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false
          }
        ],
        "exit_code": 0,
        "duration": 10,
        "timed_out": false,
        "files": {}
      }
    }
  },
  "regression_chain_all_fail": {
    "order": 114,
    "input": {
      "method": "POST",
      "path": "/v1/execute",
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "body": {
        "command": [
          {
            "cmd": "sh -c 'exit 1'"
          },
          {
            "cmd": "echo never"
          },
          {
            "cmd": "echo also never"
          }
        ],
        "timeout": 10
      }
    },
    "expected": {
      "status_code": 201,
      "output": {
        "id": "UUID",
        "commands": [
          {
            "cmd": "sh -c 'exit 1'",
            "stdout": "",
            "stderr": "",
            "exit_code": 1,
            "duration": 10,
            "timed_out": false
          }
        ],
        "exit_code": 1,
        "duration": 10,
        "timed_out": false,
        "files": {}
      }
    }
  },
  "regression_chain_all_fail_continue": {
    "order": 115,
    "input": {
      "method": "POST",
      "path": "/v1/execute",
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "body": {
        "command": [
          {
            "cmd": "sh -c 'echo fail1 && exit 1'"
          },
          {
            "cmd": "sh -c 'echo fail2 && exit 2'"
          },
          {
            "cmd": "sh -c 'echo fail3 && exit 3'"
          }
        ],
        "continue_on_error": true,
        "timeout": 10
      }
    },
    "expected": {
      "status_code": 201,
      "output": {
        "id": "UUID",
        "commands": [
          {
            "cmd": "sh -c 'echo fail1 && exit 1'",
            "stdout": "fail1\n",
            "stderr": "",
            "exit_code": 1,
            "duration": 10,
            "timed_out": false
          },
          {
            "cmd": "sh -c 'echo fail2 && exit 2'",
            "stdout": "fail2\n",
            "stderr": "",
            "exit_code": 2,
            "duration": 10,
            "timed_out": false
          },
          {
            "cmd": "sh -c 'echo fail3 && exit 3'",
            "stdout": "fail3\n",
            "stderr": "",
            "exit_code": 3,
            "duration": 10,
            "timed_out": false
          }
        ],
        "exit_code": 1,
        "duration": 10,
        "timed_out": false,
        "files": {}
      }
    }
  },
  "regression_chain_multiple_required": {
    "order": 116,
    "input": {
      "method": "POST",
      "path": "/v1/execute",
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "body": {
        "command": [
          {
            "cmd": "echo cmd1"
          },
          {
            "cmd": "sh -c 'exit 1'"
          },
          {
            "cmd": "echo cmd3",
            "required": true
          },
          {
            "cmd": "echo cmd4"
          },
          {
            "cmd": "echo cmd5",
            "required": true
          }
        ],
        "timeout": 10
      }
    },
    "expected": {
      "status_code": 201,
      "output": {
        "id": "UUID",
        "commands": [
          {
            "cmd": "echo cmd1",
            "stdout": "cmd1\n",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false
          },
          {
            "cmd": "sh -c 'exit 1'",
            "stdout": "",
            "stderr": "",
            "exit_code": 1,
            "duration": 10,
            "timed_out": false
          },
          {
            "cmd": "echo cmd3",
            "stdout": "cmd3\n",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false,
            "required": true
          },
          {
            "cmd": "echo cmd5",
            "stdout": "cmd5\n",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false,
            "required": true
          }
        ],
        "exit_code": 1,
        "duration": 10,
        "timed_out": false,
        "files": {}
      }
    }
  },
  "regression_chain_required_at_start": {
    "order": 117,
    "input": {
      "method": "POST",
      "path": "/v1/execute",
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "body": {
        "command": [
          {
            "cmd": "echo first",
            "required": true
          },
          {
            "cmd": "echo second"
          }
        ],
        "timeout": 10
      }
    },
    "expected": {
      "status_code": 201,
      "output": {
        "id": "UUID",
        "commands": [
          {
            "cmd": "echo first",
            "stdout": "first\n",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false,
            "required": true
          },
          {
            "cmd": "echo second",
            "stdout": "second\n",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false
          }
        ],
        "exit_code": 0,
        "duration": 10,
        "timed_out": false,
        "files": {}
      }
    }
  },
  "regression_chain_all_required_all_fail": {
    "order": 118,
    "input": {
      "method": "POST",
      "path": "/v1/execute",
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "body": {
        "command": [
          {
            "cmd": "sh -c 'echo r1 && exit 1'",
            "required": true
          },
          {
            "cmd": "sh -c 'echo r2 && exit 2'",
            "required": true
          },
          {
            "cmd": "sh -c 'echo r3 && exit 3'",
            "required": true
          }
        ],
        "timeout": 10
      }
    },
    "expected": {
      "status_code": 201,
      "output": {
        "id": "UUID",
        "commands": [
          {
            "cmd": "sh -c 'echo r1 && exit 1'",
            "stdout": "r1\n",
            "stderr": "",
            "exit_code": 1,
            "duration": 10,
            "timed_out": false,
            "required": true
          },
          {
            "cmd": "sh -c 'echo r2 && exit 2'",
            "stdout": "r2\n",
            "stderr": "",
            "exit_code": 2,
            "duration": 10,
            "timed_out": false,
            "required": true
          },
          {
            "cmd": "sh -c 'echo r3 && exit 3'",
            "stdout": "r3\n",
            "stderr": "",
            "exit_code": 3,
            "duration": 10,
            "timed_out": false,
            "required": true
          }
        ],
        "exit_code": 1,
        "duration": 10,
        "timed_out": false,
        "files": {}
      }
    }
  },
  "regression_chain_timeout_first": {
    "order": 119,
    "input": {
      "method": "POST",
      "path": "/v1/execute",
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "body": {
        "command": [
          {
            "cmd": "sleep 5",
            "timeout": 0.3
          },
          {
            "cmd": "echo after_timeout",
            "required": true
          }
        ],
        "timeout": 10
      }
    },
    "expected": {
      "status_code": 201,
      "output": {
        "id": "UUID",
        "commands": [
          {
            "cmd": "sleep 5",
            "stdout": "",
            "stderr": "",
            "exit_code": -1,
            "duration": 0.5,
            "timed_out": true
          },
          {
            "cmd": "echo after_timeout",
            "stdout": "after_timeout\n",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false,
            "required": true
          }
        ],
        "exit_code": -1,
        "duration": 10,
        "timed_out": true,
        "files": {}
      }
    }
  },
  "regression_chain_timeout_middle": {
    "order": 120,
    "input": {
      "method": "POST",
      "path": "/v1/execute",
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "body": {
        "command": [
          {
            "cmd": "echo before"
          },
          {
            "cmd": "sleep 5",
            "timeout": 0.3
          },
          {
            "cmd": "echo after",
            "required": true
          }
        ],
        "timeout": 10
      }
    },
    "expected": {
      "status_code": 201,
      "output": {
        "id": "UUID",
        "commands": [
          {
            "cmd": "echo before",
            "stdout": "before\n",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false
          },
          {
            "cmd": "sleep 5",
            "stdout": "",
            "stderr": "",
            "exit_code": -1,
            "duration": 0.5,
            "timed_out": true
          },
          {
            "cmd": "echo after",
            "stdout": "after\n",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false,
            "required": true
          }
        ],
        "exit_code": -1,
        "duration": 10,
        "timed_out": true,
        "files": {}
      }
    }
  },
  "regression_chain_per_timeout_small": {
    "order": 121,
    "input": {
      "method": "POST",
      "path": "/v1/execute",
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "body": {
        "command": [
          {
            "cmd": "sleep 1",
            "timeout": 0.1
          }
        ],
        "timeout": 10
      }
    },
    "expected": {
      "status_code": 201,
      "output": {
        "id": "UUID",
        "commands": [
          {
            "cmd": "sleep 1",
            "stdout": "",
            "stderr": "",
            "exit_code": -1,
            "duration": 0.3,
            "timed_out": true
          }
        ],
        "exit_code": -1,
        "duration": 0.3,
        "timed_out": true,
        "files": {}
      }
    }
  },
  "regression_chain_timeout_vs_global": {
    "order": 122,
    "input": {
      "method": "POST",
      "path": "/v1/execute",
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "body": {
        "command": [
          {
            "cmd": "sleep 2",
            "timeout": 0.3
          }
        ],
        "timeout": 10
      }
    },
    "expected": {
      "status_code": 201,
      "output": {
        "id": "UUID",
        "commands": [
          {
            "cmd": "sleep 2",
            "stdout": "",
            "stderr": "",
            "exit_code": -1,
            "duration": 0.5,
            "timed_out": true
          }
        ],
        "exit_code": -1,
        "duration": 0.5,
        "timed_out": true,
        "files": {}
      }
    }
  },
  "regression_chain_stderr_only": {
    "order": 123,
    "input": {
      "method": "POST",
      "path": "/v1/execute",
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "body": {
        "command": [
          {
            "cmd": "sh -c 'echo error >&2 && exit 1'"
          }
        ],
        "timeout": 10
      }
    },
    "expected": {
      "status_code": 201,
      "output": {
        "id": "UUID",
        "commands": [
          {
            "cmd": "sh -c 'echo error >&2 && exit 1'",
            "stdout": "",
            "stderr": "error\n",
            "exit_code": 1,
            "duration": 10,
            "timed_out": false
          }
        ],
        "exit_code": 1,
        "duration": 10,
        "timed_out": false,
        "files": {}
      }
    }
  },
  "regression_chain_file_dependency": {
    "order": 124,
    "input": {
      "method": "POST",
      "path": "/v1/execute",
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "body": {
        "command": [
          {
            "cmd": "echo data > shared.txt"
          },
          {
            "cmd": "cat shared.txt"
          }
        ],
        "track": [
          "*.txt"
        ],
        "timeout": 10
      }
    },
    "expected": {
      "status_code": 201,
      "output": {
        "id": "UUID",
        "commands": [
          {
            "cmd": "echo data > shared.txt",
            "stdout": "",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false
          },
          {
            "cmd": "cat shared.txt",
            "stdout": "data\n",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false
          }
        ],
        "exit_code": 0,
        "duration": 10,
        "timed_out": false,
        "files": {
          "shared.txt": "data\n"
        }
      }
    }
  },
  "regression_chain_long": {
    "order": 125,
    "input": {
      "method": "POST",
      "path": "/v1/execute",
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "body": {
        "command": [
          {
            "cmd": "echo step1"
          },
          {
            "cmd": "echo step2"
          },
          {
            "cmd": "echo step3"
          },
          {
            "cmd": "echo step4"
          },
          {
            "cmd": "echo step5"
          },
          {
            "cmd": "echo step6"
          },
          {
            "cmd": "echo step7"
          },
          {
            "cmd": "echo step8"
          },
          {
            "cmd": "echo step9"
          },
          {
            "cmd": "echo step10"
          }
        ],
        "timeout": 10
      }
    },
    "expected": {
      "status_code": 201,
      "output": {
        "id": "UUID",
        "commands": [
          {
            "cmd": "echo step1",
            "stdout": "step1\n",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false
          },
          {
            "cmd": "echo step2",
            "stdout": "step2\n",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false
          },
          {
            "cmd": "echo step3",
            "stdout": "step3\n",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false
          },
          {
            "cmd": "echo step4",
            "stdout": "step4\n",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false
          },
          {
            "cmd": "echo step5",
            "stdout": "step5\n",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false
          },
          {
            "cmd": "echo step6",
            "stdout": "step6\n",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false
          },
          {
            "cmd": "echo step7",
            "stdout": "step7\n",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false
          },
          {
            "cmd": "echo step8",
            "stdout": "step8\n",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false
          },
          {
            "cmd": "echo step9",
            "stdout": "step9\n",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false
          },
          {
            "cmd": "echo step10",
            "stdout": "step10\n",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false
          }
        ],
        "exit_code": 0,
        "duration": 10,
        "timed_out": false,
        "files": {}
      }
    }
  },
  "regression_chain_mixed_outcomes": {
    "order": 126,
    "input": {
      "method": "POST",
      "path": "/v1/execute",
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "body": {
        "command": [
          {
            "cmd": "echo success"
          },
          {
            "cmd": "sh -c 'exit 1'"
          },
          {
            "cmd": "echo req_ok",
            "required": true
          },
          {
            "cmd": "sleep 5",
            "timeout": 0.3,
            "required": true
          }
        ],
        "timeout": 10
      }
    },
    "expected": {
      "status_code": 201,
      "output": {
        "id": "UUID",
        "commands": [
          {
            "cmd": "echo success",
            "stdout": "success\n",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false
          },
          {
            "cmd": "sh -c 'exit 1'",
            "stdout": "",
            "stderr": "",
            "exit_code": 1,
            "duration": 10,
            "timed_out": false
          },
          {
            "cmd": "echo req_ok",
            "stdout": "req_ok\n",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false,
            "required": true
          },
          {
            "cmd": "sleep 5",
            "stdout": "",
            "stderr": "",
            "exit_code": -1,
            "duration": 0.5,
            "timed_out": true,
            "required": true
          }
        ],
        "exit_code": 1,
        "duration": 10,
        "timed_out": true,
        "files": {}
      }
    }
  },
  "regression_stdin_multiline_string": {
    "order": 127,
    "input": {
      "method": "POST",
      "path": "/v1/execute",
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "body": {
        "command": [
          {
            "cmd": "cat"
          }
        ],
        "stdin": "line1\nline2\nline3",
        "timeout": 10
      }
    },
    "expected": {
      "status_code": 201,
      "output": {
        "id": "UUID",
        "commands": [
          {
            "cmd": "cat",
            "stdout": "line1\nline2\nline3",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false
          }
        ],
        "exit_code": 0,
        "duration": 10,
        "timed_out": false,
        "files": {}
      }
    }
  },
  "regression_stdin_with_nulls": {
    "order": 128,
    "input": {
      "method": "POST",
      "path": "/v1/execute",
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "body": {
        "command": [
          {
            "cmd": "cat"
          }
        ],
        "stdin": [
          "before\u0000after",
          "another\u0000line"
        ],
        "timeout": 10
      }
    },
    "expected": {
      "status_code": 201,
      "output": {
        "id": "UUID",
        "commands": [
          {
            "cmd": "cat",
            "stdout": "before\u0000after\nanother\u0000line\n",
            "stderr": "",
            "exit_code": 0,
            "duration": 10,
            "timed_out": false
          }
        ],
        "exit_code": 0,
        "duration": 10,
        "timed_out": false,
        "files": {}
      }
    }
  },
  "regression_chain_exit_code_127": {
    "order": 129,
    "input": {
      "method": "POST",
      "path": "/v1/execute",
      "headers": {
        "content-type": "application/json; charset=utf-8"
      },
      "body": {
        "command": [
          {
            "cmd": "nonexistent_command_12345"
          }
        ],
        "timeout": 10
      }
    },
    "expected": {
      "status_code": 201,
      "output": {
        "id": "UUID",
        "commands": [
          {
            "cmd": "nonexistent_command_12345",
            "stdout": "",
            "stderr": "/bin/sh: 1: nonexistent_command_12345: not found\n",
            "exit_code": 127,
            "duration": 10,
            "timed_out": false
          }
        ],
        "exit_code": 127,
        "duration": 10,
        "timed_out": false,
        "files": {}
      }
    }
  }
}