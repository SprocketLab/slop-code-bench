{
  "01_mix_agg_nonagg_without_groupby": {
    "case": {
      "arguments": "--log-file logs.ndjson --query \"SELECT service, COUNT(*) FROM logs\"",
      "input_files": [
        {
          "path": "logs.ndjson",
          "content": [
            {
              "service": "api"
            }
          ],
          "file_type": "jsonl"
        }
      ]
    },
    "expected": {
      "stderr": {
        "error": ".*mix.*",
        "code": "E_SEMANTIC"
      },
      "status_code": 1
    }
  },
  "02_select_star_with_aggregate": {
    "case": {
      "arguments": "--log-file logs.ndjson --query \"SELECT *, COUNT(*) FROM logs\"",
      "input_files": [
        {
          "path": "logs.ndjson",
          "content": [
            {
              "a": 1
            }
          ],
          "file_type": "jsonl"
        }
      ]
    },
    "expected": {
      "stderr": {
        "error": ".*agg.*",
        "code": "E_SEMANTIC"
      },
      "status_code": 1
    }
  },
  "03_duplicate_output_key_after_as": {
    "case": {
      "arguments": "--log-file logs.ndjson --query \"SELECT COUNT(*) AS n, COUNT(bytes) AS n FROM logs\"",
      "input_files": [
        {
          "path": "logs.ndjson",
          "content": [
            {
              "bytes": 1
            }
          ],
          "file_type": "jsonl"
        }
      ]
    },
    "expected": {
      "stderr": {
        "error": ".*duplicate.*",
        "code": "E_SEMANTIC"
      },
      "status_code": 1
    }
  },
  "04_duplicate_groupby_field": {
    "case": {
      "arguments": "--log-file logs.ndjson --query \"SELECT service, COUNT(*) FROM logs GROUP BY service, service\"",
      "input_files": [
        {
          "path": "logs.ndjson",
          "content": [
            {
              "service": "api"
            }
          ],
          "file_type": "jsonl"
        }
      ]
    },
    "expected": {
      "stderr": {
        "error": ".*service.*",
        "code": "E_SEMANTIC"
      },
      "status_code": 1
    }
  }
}