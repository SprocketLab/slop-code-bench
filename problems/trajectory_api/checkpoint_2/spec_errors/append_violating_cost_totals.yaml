case:
  body:
    steps:
      - role: assistant
        content: Decreasing cost totals
        input_tokens: 5
        output_tokens: 30
        cost: 0.0010
  headers:
    content-type: application/json; charset=utf-8
    if-match: W/"2"
  id: append_violating_cost_totals
  method: POST
  path: /trajectories/{{store.create_in_progress_trajectory}}/steps
expected:
  output:
    properties:
      error:
        properties:
          code:
            type: string
            const: VALIDATION_FAILED
          message:
            const: assistant.cost must be cumulative and non-decreasing across assistant steps
          field_path:
            const: steps[0].cost
        required:
        - code
        - message
        - field_path
        type: object
    required:
    - error
    type: object
  status_code: 422
