case:
  body:
    steps:
      - role: assistant
        content: Oops, decreasing tokens
        input_tokens: 1
        output_tokens: 20
        cost: 0.0020
  headers:
    content-type: application/json; charset=utf-8
    if-match: W/"2"
  id: append_violating_running_totals
  method: POST
  path: /trajectories/{{store.create_in_progress_trajectory}}/steps
expected:
  output:
    properties:
      error:
        properties:
          code:
            type: string
            const: VALIDATION_FAILED
          message:
            const: assistant.output_tokens must be cumulative and non-decreasing across assistant steps
          field_path:
            const: steps[0].output_tokens
        required:
        - code
        - message
        - field_path
        type: object
    required:
    - error
    type: object
  status_code: 422