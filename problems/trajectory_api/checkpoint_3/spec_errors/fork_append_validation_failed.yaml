case:
  body:
    up_to_step: 4
    append:
      - role: assistant
        content: Bad decreasing tokens
        input_tokens: 5
        output_tokens: 10
        cost: 0.001
  headers:
    content-type: application/json; charset=utf-8
    if-match: W/"3"
  id: fork_append_validation_failed
  method: POST
  path: /trajectories/{{store.create_in_progress_trajectory}}/fork
expected:
  output:
    properties:
      error:
        properties:
          code:
            type: string
            const: VALIDATION_FAILED
          message:
            const: assistant.output_tokens must be cumulative and non-decreasing across assistant steps
          field_path:
            const: append[0].output_tokens
        required:
        - code
        - message
        - field_path
        type: object
    required:
    - error
    type: object
  status_code: 422