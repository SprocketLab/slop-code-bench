case:
  body:
    up_to_step: 3
    status: in_progress
    branch: fork-after-append
  headers:
    content-type: application/json; charset=utf-8
    if-match: W/"2"
  id: regression_append_then_fork
  method: POST
  path: /trajectories/{{store.regression_fork_then_append}}/fork
expected:
  output:
    properties:
      id:
        type: string
        pattern: '^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$'
      status:
        const: in_progress
      rev:
        const: 1
      steps:
        const: 4
      lineage:
        properties:
          parent_id:
            const: "{{store.regression_fork_then_append}}"
          parent_rev:
            const: 2
        required:
          - parent_id
          - parent_rev
        type: object
    required:
      - id
      - status
      - rev
      - steps
      - lineage
    type: object
  status_code: 201
