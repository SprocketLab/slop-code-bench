case:
  headers:
    content-type: application/json; charset=utf-8
  id: get_trajectory_with_lineage
  method: GET
  path: /trajectories/{{store.fork_with_append}}
expected:
  output:
    properties:
      id:
        const: "{{store.fork_with_append}}"
      record:
        properties:
          lineage:
            properties:
              parent_id:
                const: "{{store.create_in_progress_trajectory}}"
              parent_rev:
                const: 3
              forked_from_step:
                const: 2
              branch:
                const: retry-with-tool-use
            required:
            - parent_id
            - parent_rev
            - forked_from_step
            - branch
            type: object
        type: object
      derived:
        properties:
          steps:
            const: 5
          final_output_tokens:
            const: 64
          final_cost:
            const: 0.0072
        type: object
      lineage:
        properties:
          parent_id:
            const: "{{store.create_in_progress_trajectory}}"
          parent_rev:
            const: 3
          forked_from_step:
            const: 2
          branch:
            const: retry-with-tool-use
        required:
        - parent_id
        - parent_rev
        - forked_from_step
        - branch
        type: object
    required:
    - id
    - record
    - derived
    - lineage
    type: object
  status_code: 200