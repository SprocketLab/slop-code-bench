case:
  headers:
    content-type: application/json; charset=utf-8
  id: search_by_parent_id
  method: GET
  path: /trajectories?parent_id={{store.create_in_progress_trajectory}}
expected:
  output:
    properties:
      items:
        type: array
        items:
          properties:
            id:
              const: "{{store.fork_with_append}}"
            lineage:
              properties:
                parent_id:
                  const: "{{store.create_in_progress_trajectory}}"
                parent_rev:
                  const: 3
                forked_from_step:
                  const: 2
                branch:
                  const: retry-with-tool-use
              required:
              - parent_id
              - parent_rev
              - forked_from_step
              - branch
              type: object
          required:
          - id
          - lineage
          type: object
      next_cursor:
        oneOf:
          - type: string
          - type: "null"
    required:
    - items
    - next_cursor
    type: object
  status_code: 200